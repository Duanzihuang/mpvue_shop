{"version":3,"sources":["webpack:///./src/pages/orders/main.js","webpack:///./src/pages/orders/index.vue","webpack:///./src/pages/orders/index.vue?1fc2","webpack:///src/pages/orders/index.vue","webpack:///./src/pages/orders/index.vue?9462"],"names":["app","$mount"],"mappings":";;;;;;;;;;AAAA;AACA;;AAEA,IAAMA,MAAM,IAAI,2CAAJ,CAAQ,uDAAR,CAAZ;AACAA,IAAIC,MAAJ,G;;;;;;;;;ACJA;AAAA;AACA;AACA;AACA,yBAAob;AACpb;AACA;AACA;AACA;AACA;AACsP;AACtP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+EAA+E,sDAAsD,IAAI;AACzI,mCAAmC;;AAEnC;AACA,YAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH,CAAC;;AAED;;;;;;;;AC3CA,yC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACuDA;AACA,MADA,kBACA;AACA;AACA,0CADA;AAEA,wBAFA,EAEA;AACA,aAHA,EAGA;AACA,mBAJA,CAIA;AAJA;AAMA,GARA;AASA,QATA,kBASA,OATA,EASA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,GAjBA;;AAkBA;AACA;AACA,oBAFA,8BAEA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACA;AACA;AACA;AADA;AADA,kBADA;;AAAA;AACA,sBADA;;;AAOA;;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA,KAVA;;AAWA;AACA,uBAZA,+BAYA,KAZA,EAYA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,KAtBA;;AAuBA;AACA,WAxBA,mBAwBA,YAxBA,EAwBA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACA,mBACA,0CADA,EAEA,8BAFA,CADA;;AAAA;AACA,sBADA;;;AAMA;AACA;AACA;AACA,gEADA;AAEA,8DAFA;AAGA,4DAHA;AAIA,8DAJA;AAKA,4DALA;AAMA;AACA;AACA,oCACA,IADA,CACA,kCADA,EACA;AACA;AADA,uBADA,EAIA,IAJA,CAIA;AACA;AACA;AACA;AACA,uBARA;AASA,qBAjBA;AAkBA;AACA;AACA,wCADA,EACA;AACA,sDAFA,EAEA;AACA,sCAHA,EAGA;AACA,kCAJA,EAIA;AACA;AACA;AACA;AACA,2BAFA,EAEA,IAFA;AAGA;AATA;AAWA;AA9BA;AAgCA;;AAxCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAyCA;AAjEA;AAlBA,G;;;;;;;;ACvDA,0BAA0B,aAAa,0BAA0B;AACjE;AACA;AACA,GAAG;AACH;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA,OAAO;AACP,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA,GAAG;AACH;AACA,oCAAoC,aAAa,0BAA0B;AAC3E;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,CAAC;AACD;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,C","file":"pages\\orders\\main.js","sourcesContent":["import Vue from 'vue'\nimport App from './index'\n\nconst app = new Vue(App)\napp.$mount()\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/orders/main.js","var disposed = false\nfunction injectStyle (ssrContext) {\n  if (disposed) return\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":false,\\\"sourceMap\\\":false}!../../../node_modules/mpvue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-448e087d\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!px2rpx-loader?{\\\"baseDpr\\\":1,\\\"rpxUnit\\\":0.5}!postcss-loader?{\\\"sourceMap\\\":true}!less-loader?{\\\"sourceMap\\\":false}!../../../node_modules/mpvue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/mpvue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/mpvue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/mpvue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-448e087d\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"}}!../../../node_modules/mpvue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\nComponent.options.__file = \"src\\\\pages\\\\orders\\\\index.vue\"\nif (Component.esModule && Object.keys(Component.esModule).some(function (key) {return key !== \"default\" && key.substr(0, 2) !== \"__\"})) {console.error(\"named exports are not supported in *.vue files.\")}\nif (Component.options.functional) {console.error(\"[vue-loader] index.vue: functional components are not supported with templates, they should use render functions.\")}\n\n/* hot reload */\nif (module.hot) {(function () {\n  var hotAPI = require(\"vue-hot-reload-api\")\n  hotAPI.install(require(\"vue\"), false)\n  if (!hotAPI.compatible) return\n  module.hot.accept()\n  if (!module.hot.data) {\n    hotAPI.createRecord(\"data-v-448e087d\", Component.options)\n  } else {\n    hotAPI.reload(\"data-v-448e087d\", Component.options)\n  }\n  module.hot.dispose(function (data) {\n    disposed = true\n  })\n})()}\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/orders/index.vue\n// module id = 153\n// module chunks = 5","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/extract-text-webpack-plugin/dist/loader.js?{\"omit\":1,\"remove\":true}!./node_modules/vue-style-loader!./node_modules/css-loader?{\"minimize\":false,\"sourceMap\":false}!./node_modules/mpvue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-448e087d\",\"scoped\":false,\"hasInlineConfig\":false}!./node_modules/px2rpx-loader?{\"baseDpr\":1,\"rpxUnit\":0.5}!./node_modules/postcss-loader/lib?{\"sourceMap\":true}!./node_modules/less-loader/dist/cjs.js?{\"sourceMap\":false}!./node_modules/mpvue-loader/lib/selector.js?type=styles&index=0!./src/pages/orders/index.vue\n// module id = 154\n// module chunks = 5","<template>\n  <view>\n    <!-- 1.0 菜单项 -->\n    <view class=\"menus\">\n      <block v-for=\"(item,index) in menus\" :key=\"index\">\n        <view @tap=\"changeSelectedIndex(index)\" :class=\"['menu', selectMenuIndex===index?'active':'']\">\n          {{item}}\n        </view>\n      </block>\n    </view>\n    <!-- 2.0 订单列表（分状态） -->\n    <view class=\"order\">\n      <block v-for=\"order in orderList\" :key=\"order.order_id\">\n        <view class=\"order-item\">\n          <!-- 2.1 列表项(需要循环) -->\n          <block v-for=\"(item,index2) in order.goods\" :key=\"index2\">\n            <view class=\"product-item\">\n              <navigator :url=\"'/pages/goods_detail/main?goods_id='+item.goods_id\" class=\"product-left\">\n                <image class=\"product-img holder-image\" :src=\"item.goods_small_logo\" />\n              </navigator>\n              <view class=\"product-right\">\n                <navigator :url=\"'/pages/goods_detail/main?goods_id='+item.goods_id\" class=\"product-name\">\n                  {{ item.goods_name }}\n                </navigator>\n                <view class=\"product-price\">\n                  <text class=\"product-price-symbol\">￥</text>\n                  <text class=\"product-price-integer\">{{ item.goods_price }}</text>\n                  <text class=\"product-price-decimal\">.00</text>\n                </view>\n                <view class=\"product-count\">x{{ item.goods_number }}</view>\n              </view>\n            </view>\n          </block>\n          <!-- 2.2 统计信息 -->\n          <view class=\"order-total\">\n            共{{order.total_count }}件商品 总计：¥{{order.total_price}} (含运费0.00)\n          </view>\n          <!-- 2.3 支付信息 -->\n          <view class=\"order-item-pay\">\n            <view>订单号:{{order.order_number}}</view>\n            <view @tap=\"goToPay(order.order_number)\" v-if=\"order.pay_status==='0'\" class=\"btn-line btn-color-main\">支付</view>\n          </view>\n        </view>\n      </block>\n      <view class=\"no_order\" v-if=\"orderList.length === 0\">\n        <view>\n          <img src=\"/static/img/empty_data.png\" alt=\"\">\n        </view>\n        <text>没有订单啦...</text>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      menus: ['全部', '待付款', '已付款', '退款/退货'],\n      selectMenuIndex: 0, // 选中的索引\n      type: 1, // 订单类型，约定1是全部订单 2是待付款 3是已付款 4是退款/退货\n      orderList: [] // 订单列表\n    }\n  },\n  onLoad(options) {\n    // 获取传递过来的类型\n    this.type = options.type\n\n    // 设置选中的索引\n    this.selectMenuIndex = parseInt(this.type || '1') - 1\n\n    this.getOrderListData()\n  },\n  methods: {\n    // 获取列表数据\n    async getOrderListData() {\n      const result = await this.$axios.get('api/public/v1/my/orders/all', {\n        params: {\n          type: this.type\n        }\n      })\n\n      this.orderList = result.data.message.orders\n    },\n    // 更改索引\n    changeSelectedIndex(index) {\n      if (this.selectMenuIndex === index) return\n\n      this.selectMenuIndex = index\n\n      // 更改类型\n      this.type = this.selectMenuIndex + 1\n\n      // 重新获取数据\n      this.getOrderListData()\n    },\n    // 去支付\n    async goToPay(order_number) {\n      const result = await this.$axios.post(\n        'api/public/v1/my/orders/req_unifiedorder',\n        { order_number }\n      )\n\n      // 生成预支付单成功\n      if (result.data.meta.status === 200) {\n        wx.requestPayment({\n          timeStamp: result.data.message.pay.timeStamp,\n          nonceStr: result.data.message.pay.nonceStr,\n          package: result.data.message.pay.package,\n          signType: result.data.message.pay.signType,\n          paySign: result.data.message.pay.paySign,\n          success: res => {\n            // 1.成功支付之后，调用后台的接口把订单的状态改为已经支付\n            this.$axios\n              .post('api/public/v1/my/orders/chkOrder', {\n                order_number\n              })\n              .then(result2 => {\n                if (result2.data.meta.status === 200) {\n                  this.getOrderListData()\n                }\n              })\n          },\n          fail: err => {\n            wx.showToast({\n              title: '用户取消了支付', //提示的内容,\n              image: '/static/img/error.png', //图标,\n              duration: 2000, //延迟时间,\n              mask: true, //显示透明蒙层，防止触摸穿透\n              success: res => {\n                setTimeout(() => {\n                  this.getOrderListData()\n                }, 2000)\n              }\n            })\n          }\n        })\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"less\">\n.menus {\n  height: 100rpx;\n  background-color: #ffffff;\n  display: flex;\n}\n.menu {\n  display: flex;\n  flex: 1;\n  align-items: center;\n  justify-content: center;\n  font-size: 30rpx;\n  position: relative;\n}\n.active {\n  color: #ff2d4a;\n  font-weight: 400;\n}\n\n.active::after {\n  content: '';\n  height: 10rpx;\n  width: 100%;\n  background-color: #ff2d4a;\n  position: absolute;\n  left: 0;\n  bottom: 0;\n}\n.order {\n  margin-bottom: 30rpx;\n  &-item {\n    background-color: #ffffff;\n    margin-top: 30rpx;\n    // background-color: yellow;\n  }\n}\n\n.product-item {\n  display: flex;\n  padding: 30rpx 20rpx;\n  position: relative;\n}\n.product-item::after {\n  content: '';\n  position: absolute;\n  left: 20rpx;\n  right: 0;\n  bottom: 0;\n  border-bottom: 1rpx solid #ddd;\n}\n// .product-item:first-child::after {\n//   border-bottom: 0 none;\n// }\n\n.product-left {\n  margin-right: 26rpx;\n}\n.product-left,\n.product-left .product-img {\n  width: 200rpx;\n  height: 200rpx;\n  background-color: #eee;\n}\n.product-right {\n  width: 480rpx;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  position: relative;\n}\n.product-name {\n  height: 84rpx;\n  font-size: 30rpx;\n  line-height: 1.4;\n  /* 多行文字隐藏省略号 */\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-line-clamp: 2;\n}\n.product-price {\n  color: #ff2d4a;\n}\n.product-price-symbol,\n.product-price-decimal {\n  font-size: 28rpx;\n}\n.product-price-integer {\n  font-size: 44rpx;\n}\n\n.product-count {\n  position: absolute;\n  right: 0;\n  bottom: 0;\n  letter-spacing: 2rpx;\n}\n\n.order-total {\n  height: 88rpx;\n  background-color: #fff;\n  padding: 0 20rpx;\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n  position: relative;\n  color: #999;\n  &::after {\n    content: '';\n    position: absolute;\n    left: 20rpx;\n    right: 20rpx;\n    right: 0;\n    bottom: 0;\n    border-bottom: 1rpx solid #ddd;\n  }\n}\n\n.order-item-pay {\n  display: flex;\n  height: 88rpx;\n  align-items: center;\n  padding: 0rpx 20rpx;\n  justify-content: space-between;\n}\n\n.btn-line {\n  border: 2rpx solid #999;\n  border-radius: 5rpx;\n  width: 156rpx;\n  height: 56rpx;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin-left: 40rpx;\n}\n.btn-color-main {\n  color: #ff2d4a;\n}\n\n.no_order {\n  width: 750rpx;\n  height: 500rpx;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  img {\n    width: 100rpx;\n    height: 100rpx;\n  }\n  text {\n    color: #999999;\n    font-size: 30rpx;\n    margin-top: 30rpx;\n  }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/orders/index.vue?b857bdc6","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('view', [_c('view', {\n    staticClass: \"menus\"\n  }, _vm._l((_vm.menus), function(item, index) {\n    return _c('block', {\n      key: index\n    }, [_c('view', {\n      class: ['menu', _vm.selectMenuIndex === index ? 'active' : ''],\n      attrs: {\n        \"eventid\": '0-' + index\n      },\n      on: {\n        \"tap\": function($event) {\n          _vm.changeSelectedIndex(index)\n        }\n      }\n    }, [_vm._v(\"\\n        \" + _vm._s(item) + \"\\n      \")])])\n  })), _vm._v(\" \"), _c('view', {\n    staticClass: \"order\"\n  }, [_vm._l((_vm.orderList), function(order, index) {\n    return _c('block', {\n      key: order.order_id\n    }, [_c('view', {\n      staticClass: \"order-item\"\n    }, [_vm._l((order.goods), function(item, index2) {\n      return _c('block', {\n        key: index2\n      }, [_c('view', {\n        staticClass: \"product-item\"\n      }, [_c('navigator', {\n        staticClass: \"product-left\",\n        attrs: {\n          \"url\": '/pages/goods_detail/main?goods_id=' + item.goods_id\n        }\n      }, [_c('image', {\n        staticClass: \"product-img holder-image\",\n        attrs: {\n          \"src\": item.goods_small_logo\n        }\n      })]), _vm._v(\" \"), _c('view', {\n        staticClass: \"product-right\"\n      }, [_c('navigator', {\n        staticClass: \"product-name\",\n        attrs: {\n          \"url\": '/pages/goods_detail/main?goods_id=' + item.goods_id\n        }\n      }, [_vm._v(\"\\n                \" + _vm._s(item.goods_name) + \"\\n              \")]), _vm._v(\" \"), _c('view', {\n        staticClass: \"product-price\"\n      }, [_c('text', {\n        staticClass: \"product-price-symbol\"\n      }, [_vm._v(\"￥\")]), _vm._v(\" \"), _c('text', {\n        staticClass: \"product-price-integer\"\n      }, [_vm._v(_vm._s(item.goods_price))]), _vm._v(\" \"), _c('text', {\n        staticClass: \"product-price-decimal\"\n      }, [_vm._v(\".00\")])]), _vm._v(\" \"), _c('view', {\n        staticClass: \"product-count\"\n      }, [_vm._v(\"x\" + _vm._s(item.goods_number))])], 1)], 1)])\n    }), _vm._v(\" \"), _c('view', {\n      staticClass: \"order-total\"\n    }, [_vm._v(\"\\n          共\" + _vm._s(order.total_count) + \"件商品 总计：¥\" + _vm._s(order.total_price) + \" (含运费0.00)\\n        \")]), _vm._v(\" \"), _c('view', {\n      staticClass: \"order-item-pay\"\n    }, [_c('view', [_vm._v(\"订单号:\" + _vm._s(order.order_number))]), _vm._v(\" \"), (order.pay_status === '0') ? _c('view', {\n      staticClass: \"btn-line btn-color-main\",\n      attrs: {\n        \"eventid\": '1-' + index\n      },\n      on: {\n        \"tap\": function($event) {\n          _vm.goToPay(order.order_number)\n        }\n      }\n    }, [_vm._v(\"支付\")]) : _vm._e()])], 2)])\n  }), _vm._v(\" \"), (_vm.orderList.length === 0) ? _c('view', {\n    staticClass: \"no_order\"\n  }, [_vm._m(0), _vm._v(\" \"), _c('text', [_vm._v(\"没有订单啦...\")])]) : _vm._e()], 2)])\n}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('view', [_c('img', {\n    attrs: {\n      \"src\": \"/static/img/empty_data.png\",\n      \"alt\": \"\"\n    }\n  })])\n}]\nrender._withStripped = true\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\nif (module.hot) {\n  module.hot.accept()\n  if (module.hot.data) {\n     require(\"vue-hot-reload-api\").rerender(\"data-v-448e087d\", esExports)\n  }\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/mpvue-loader/lib/template-compiler?{\"id\":\"data-v-448e087d\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"}}!./node_modules/mpvue-loader/lib/selector.js?type=template&index=0!./src/pages/orders/index.vue\n// module id = 156\n// module chunks = 5"],"sourceRoot":""}